import{r as p,u as S,j as s,d as F,m as E,C as o,B as u,F as a,n as f}from"./index-CwmvLTAY.js";import{u as U}from"./user-4-3vO0y8zp.js";import{u as k}from"./UserService-DpYplUIi.js";import{R as x}from"./Row-DQJWrMMf.js";import{C as g}from"./Card-nCwNBMnw.js";import{I as B}from"./Image-B7xlEbPk.js";import"./httpClient-C-6Fvtai.js";import"./CardHeaderContext-B_VJR2Kl.js";import"./divWithClassName-B6s3PHIC.js";const C=p.forwardRef(({bsPrefix:e,fluid:r=!1,as:l="div",className:d,...c},j)=>{const n=S(e,"container"),t=typeof r=="string"?`-${r}`:"-fluid";return s.jsx(l,{ref:j,...c,className:F(d,r?`${n}${t}`:n)})});C.displayName="Container";const X=()=>{const{user:e}=E(),[r,l]=p.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[d,c]=p.useState(!1),[j,n]=p.useState(!1),t=w=>{const{name:i,value:m}=w.target;l(h=>({...h,[i]:m}))},v=async w=>{var i,m,h,N,P;if(w.preventDefault(),r.newPassword!==r.confirmPassword){f.error("New passwords do not match");return}c(!0);try{await k.changePassword({currentPassword:r.currentPassword,newPassword:r.newPassword,confirmPassword:r.confirmPassword}),f.success("Password changed successfully"),l({currentPassword:"",newPassword:"",confirmPassword:""}),n(!1)}catch(b){const y=((h=(m=(i=b.response)==null?void 0:i.data)==null?void 0:m[0])==null?void 0:h.description)||((P=(N=b.response)==null?void 0:N.data)==null?void 0:P.message)||"Failed to change password";f.error(y)}finally{c(!1)}};return s.jsxs(C,{fluid:!0,children:[s.jsx(x,{children:s.jsx(o,{sm:"12",children:s.jsx("div",{className:"page-title-box",children:s.jsx(x,{children:s.jsxs(o,{children:[s.jsx("h4",{className:"page-title",children:"User Profile"}),s.jsxs("ol",{className:"breadcrumb",children:[s.jsx("li",{className:"breadcrumb-item",children:s.jsx("a",{href:"#",children:"ProjectX"})}),s.jsx("li",{className:"breadcrumb-item",children:s.jsx("a",{href:"#",children:"SaaS"})}),s.jsx("li",{className:"breadcrumb-item active",children:"Profile"})]})]})})})})}),s.jsx(x,{children:s.jsx(o,{lg:"12",children:s.jsx(g,{children:s.jsxs(g.Body,{children:[s.jsxs("div",{className:"d-flex align-items-center mb-4",children:[e!=null&&e.name?s.jsx("div",{className:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center me-3 thumb-md fw-bold",style:{width:"64px",height:"64px",fontSize:"24px"},children:e.name.charAt(0).toUpperCase()}):s.jsx(B,{src:U,className:"rounded-circle thumb-md me-3"}),s.jsxs("div",{className:"flex-grow-1",children:[s.jsx("h4",{className:"m-0 mb-1",children:(e==null?void 0:e.name)||"User"}),s.jsx("p",{className:"text-muted mb-0",children:(e==null?void 0:e.role)||"Admin"})]})]}),s.jsxs(x,{children:[s.jsxs(o,{md:6,children:[s.jsx("h5",{className:"header-title mt-0 mb-3",children:"Personal Information"}),s.jsxs("div",{className:"text-start",children:[s.jsxs("p",{className:"text-muted font-13",children:[s.jsx("strong",{children:"Full Name :"})," ",s.jsx("span",{className:"ms-2",children:(e==null?void 0:e.name)||"User"})]}),s.jsxs("p",{className:"text-muted font-13",children:[s.jsx("strong",{children:"Email :"})," ",s.jsx("span",{className:"ms-2",children:(e==null?void 0:e.email)||"user@example.com"})]}),s.jsxs("p",{className:"text-muted font-13",children:[s.jsx("strong",{children:"Phone Number :"})," ",s.jsx("span",{className:"ms-2",children:(e==null?void 0:e.phoneNumber)||"Not provided"})]})]})]}),s.jsx(o,{md:6,className:"border-start",children:j?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[s.jsx("h5",{className:"header-title mt-0",children:"Change Password"}),s.jsx(u,{variant:"link",size:"sm",className:"text-muted",onClick:()=>n(!1),children:"Cancel"})]}),s.jsxs(a,{onSubmit:v,children:[s.jsxs(a.Group,{className:"mb-3",children:[s.jsx(a.Label,{children:"Current Password"}),s.jsx(a.Control,{type:"password",name:"currentPassword",value:r.currentPassword,onChange:t,required:!0,placeholder:"Enter current password"})]}),s.jsxs(a.Group,{className:"mb-3",children:[s.jsx(a.Label,{children:"New Password"}),s.jsx(a.Control,{type:"password",name:"newPassword",value:r.newPassword,onChange:t,required:!0,placeholder:"Enter new password"})]}),s.jsxs(a.Group,{className:"mb-3",children:[s.jsx(a.Label,{children:"Confirm New Password"}),s.jsx(a.Control,{type:"password",name:"confirmPassword",value:r.confirmPassword,onChange:t,required:!0,placeholder:"Confirm new password"})]}),s.jsx(u,{variant:"primary",type:"submit",disabled:d,className:"w-100",children:d?"Changing...":"Update Password"})]})]}):s.jsx("div",{className:"text-center py-4",children:s.jsxs(u,{variant:"outline-primary",onClick:()=>n(!0),children:[s.jsx("i",{className:"mdi mdi-lock-reset me-1"})," Change Password"]})})})]})]})})})})]})};export{X as default};
