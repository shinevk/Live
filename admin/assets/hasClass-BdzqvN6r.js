import{r as s,R as M,t as D,z as N,V as O,j as x}from"./index-CwmvLTAY.js";import{g as h}from"./TransitionWrapper-BaRKeh_t.js";const S=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",W=typeof document<"u",v=W||S?s.useLayoutEffect:s.useEffect,j=n=>!n||typeof n=="function"?n:e=>{n.current=e};function F(n,e){const i=j(n),t=j(e);return o=>{i&&i(o),t&&t(o)}}function m(n,e){return s.useMemo(()=>F(n,e),[n,e])}const b=(n,e)=>D?n==null?(e||N()).body:(typeof n=="function"&&(n=n()),n&&"current"in n&&(n=n.current),n&&("nodeType"in n||n.getBoundingClientRect)?n:null):null;function J(n,e){const i=M(),[t,o]=s.useState(()=>b(n,i==null?void 0:i.document));if(!t){const r=b(n);r&&o(r)}return s.useEffect(()=>{},[e,t]),s.useEffect(()=>{const r=b(n);r!==t&&o(r)},[n,t]),t}function I({children:n,in:e,onExited:i,mountOnEnter:t,unmountOnExit:o}){const r=s.useRef(null),c=s.useRef(e),a=O(i);s.useEffect(()=>{e?c.current=!0:a(r.current)},[e,a]);const l=m(r,h(n)),u=s.cloneElement(n,{ref:l});return e?u:o||!c.current&&t?null:u}const z=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function G(n,e){if(n==null)return{};var i={};for(var t in n)if({}.hasOwnProperty.call(n,t)){if(e.indexOf(t)>=0)continue;i[t]=n[t]}return i}function V(n){let{onEnter:e,onEntering:i,onEntered:t,onExit:o,onExiting:r,onExited:c,addEndListener:a,children:l}=n,u=G(n,z);const d=s.useRef(null),E=m(d,h(l)),f=R=>g=>{R&&d.current&&R(d.current,g)},C=s.useCallback(f(e),[e]),p=s.useCallback(f(i),[i]),y=s.useCallback(f(t),[t]),T=s.useCallback(f(o),[o]),L=s.useCallback(f(r),[r]),w=s.useCallback(f(c),[c]),k=s.useCallback(f(a),[a]);return Object.assign({},u,{nodeRef:d},e&&{onEnter:C},i&&{onEntering:p},t&&{onEntered:y},o&&{onExit:T},r&&{onExiting:L},c&&{onExited:w},a&&{addEndListener:k},{children:typeof l=="function"?(R,g)=>l(R,Object.assign({},g,{ref:E})):s.cloneElement(l,{ref:E})})}const _=["component"];function $(n,e){if(n==null)return{};var i={};for(var t in n)if({}.hasOwnProperty.call(n,t)){if(e.indexOf(t)>=0)continue;i[t]=n[t]}return i}const U=s.forwardRef((n,e)=>{let{component:i}=n,t=$(n,_);const o=V(t);return x.jsx(i,Object.assign({ref:e},o))});function q({in:n,onTransition:e}){const i=s.useRef(null),t=s.useRef(!0),o=O(e);return v(()=>{if(!i.current)return;let r=!1;return o({in:n,element:i.current,initial:t.current,isStale:()=>r}),()=>{r=!0}},[n,o]),v(()=>(t.current=!1,()=>{t.current=!0}),[]),i}function A({children:n,in:e,onExited:i,onEntered:t,transition:o}){const[r,c]=s.useState(!e);e&&r&&c(!1);const a=q({in:!!e,onTransition:u=>{const d=()=>{u.isStale()||(u.in?t==null||t(u.element,u.initial):(c(!0),i==null||i(u.element)))};Promise.resolve(o(u)).then(d,E=>{throw u.in||c(!0),E})}}),l=m(a,h(n));return r&&!e?null:s.cloneElement(n,{ref:l})}function K(n,e,i){return n?x.jsx(U,Object.assign({},i,{component:n})):e?x.jsx(A,Object.assign({},i,{transition:e})):x.jsx(I,Object.assign({},i))}function P(n,e){return n.classList?!!e&&n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}export{I as N,m as a,P as h,K as r,J as u};
